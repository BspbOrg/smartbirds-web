<div class="page-tasks">
  <h1 class="page-header">
    Tasks management
  </h1>

  <style>
    .page-tasks label {
      display: block;
    }
  </style>

  <div class="panel panel-default">
    <div class="panel-heading">Auto locations</div>
    <div class="panel-body">
      <form name="autoLocation" class="form-inline">
        <div class="form-group">
          <label for="auto-location-form">Form</label>
          <select class="form-control" id="auto-location-form"
                  ng-model="autoLocation.form"
                  ng-options="::v.serverModel as ::v.label|translate for v in ::$ctrl.forms">
            <option value="">all forms</option>
          </select>
        </div>
        <div class="form-group">
          <label for="auto-location-id">Record ID</label>
          <input type="number" class="form-control" id="auto-location-id"
                 placeholder="all without location"
                 ng-model="autoLocation.id">
        </div>
        <div class="form-group">
          <label for="auto-location-limit">Records</label>
          <input type="number" class="form-control" id="auto-location-limit"
                 placeholder="newest records"
                 ng-model="autoLocation.limit">
        </div>
        <div class="checkbox">
          <label>
            <input type="checkbox" ng-model="autoLocation.force">
            Force
          </label>
        </div>
        <button type="button" class="btn btn-default"
                ng-click="$ctrl.autoLocation(autoLocation.form, autoLocation.id, autoLocation.limit, autoLocation.force)">
          Run
        </button>
      </form>
    </div>
    <div class="panel-footer">
      <div ng-if="$ctrl.autoLocation.loading" class="alert alert-info" role="alert">
        <i class="fa fa-spinner fa-spin"></i>
        running...
      </div>
      <div ng-if="$ctrl.autoLocation.response" class="alert alert-success" role="alert">
        {{$ctrl.autoLocation.response ? 'success' : 'failure'}}
      </div>
      <div ng-if="$ctrl.autoLocation.error" class="alert alert-danger" role="alert">
        {{$ctrl.autoLocation.error}}
      </div>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">BG Atlas 2008</div>
    <div class="panel-body">
      <form name="bgatlas2008" class="form-inline">
        <div class="form-group">
          <label for="bgatlas2008-form">Form</label>
          <select class="form-control" id="bgatlas2008-form"
                  ng-model="bgatlas2008.form"
                  ng-options="::v.serverModel as ::v.label|translate for v in ::$ctrl.forms">
            <option value="">all forms</option>
          </select>
        </div>
        <div class="form-group">
          <label for="bgatlas2008-id">Record ID</label>
          <input type="number" class="form-control" id="bgatlas2008-id"
                 placeholder="all without location"
                 ng-model="bgatlas2008.id">
        </div>
        <div class="form-group">
          <label for="bgatlas2008-limit">Records</label>
          <input type="number" class="form-control" id="bgatlas2008-limit"
                 placeholder="newest records"
                 ng-model="bgatlas2008.limit">
        </div>
        <div class="checkbox">
          <label>
            <input type="checkbox" ng-model="bgatlas2008.force">
            Force
          </label>
        </div>
        <button type="button" class="btn btn-default"
                ng-click="$ctrl.bgatlas2008(bgatlas2008.form, bgatlas2008.id, bgatlas2008.limit, bgatlas2008.force)">
          Run
        </button>
      </form>
    </div>
    <div class="panel-footer">
      <div ng-if="$ctrl.bgatlas2008.loading" class="alert alert-info" role="alert">
        <i class="fa fa-spinner fa-spin"></i>
        running...
      </div>
      <div ng-if="$ctrl.bgatlas2008.response" class="alert alert-success" role="alert">
        {{$ctrl.bgatlas2008.response ? 'success' : 'failure'}}
      </div>
      <div ng-if="$ctrl.bgatlas2008.error" class="alert alert-danger" role="alert">
        {{$ctrl.bgatlas2008.error}}
      </div>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">Auto visit number</div>
    <div class="panel-body">
      <form name="auto-visit" class="form-inline">
        <div class="form-group">
          <label for="auto-visit-form">Form</label>
          <select class="form-control" id="auto-visit-form"
                  ng-model="autoVisit.form"
                  ng-options="::v.serverModel as ::v.label|translate for v in ::$ctrl.forms">
            <option value="">all forms</option>
          </select>
        </div>
        <div class="form-group">
          <label for="auto-visit-id">Record ID</label>
          <input type="number" class="form-control" id="auto-visit-id"
                 placeholder="all not already processed"
                 ng-model="autoVisit.id">
        </div>
        <div class="form-group">
          <label for="auto-visit-limit">Records</label>
          <input type="number" class="form-control" id="auto-visit-limit"
                 placeholder="newest records"
                 ng-model="autoVisit.limit">
        </div>
        <div class="checkbox">
          <label>
            <input type="checkbox" ng-model="autoVisit.force">
            Force
          </label>
        </div>
        <button type="button" class="btn btn-default"
                ng-click="$ctrl.autoVisit(autoVisit.form, autoVisit.id, autoVisit.limit, autoVisit.force)">
          Run
        </button>
      </form>
    </div>
    <div class="panel-footer">
      <div ng-if="$ctrl.autoVisit.loading" class="alert alert-info" role="alert">
        <i class="fa fa-spinner fa-spin"></i>
        running...
      </div>
      <div ng-if="$ctrl.autoVisit.response" class="alert alert-success" role="alert">
        {{$ctrl.autoVisit.response ? 'success' : 'failure'}}
      </div>
      <div ng-if="$ctrl.autoVisit.error" class="alert alert-danger" role="alert">
        {{$ctrl.autoVisit.error}}
      </div>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">Birds new species moderator review</div>
    <div class="panel-body">
      <form name="birdsNewSpeciesModeratorReview" class="form-inline">
        <div class="form-group">
          <label for="birdsNewSpeciesModeratorReview-form">Form</label>
          <select class="form-control" id="birdsNewSpeciesModeratorReview-form"
                  ng-model="birdsNewSpeciesModeratorReview.form"
                  ng-options="::v.serverModel as ::v.label|translate for v in ::$ctrl.forms">
            <option value="">all forms</option>
          </select>
        </div>
        <div class="form-group">
          <label for="birdsNewSpeciesModeratorReview-id">Record ID</label>
          <input type="number" class="form-control" id="birdsNewSpeciesModeratorReview-id"
                 placeholder="all without location"
                 ng-model="birdsNewSpeciesModeratorReview.id">
        </div>
        <div class="form-group">
          <label for="birdsNewSpeciesModeratorReview-limit">Records</label>
          <input type="number" class="form-control" id="birdsNewSpeciesModeratorReview-limit"
                 placeholder="newest records"
                 ng-model="birdsNewSpeciesModeratorReview.limit">
        </div>
        <div class="checkbox">
          <label>
            <input type="checkbox" ng-model="birdsNewSpeciesModeratorReview.force">
            Force
          </label>
        </div>
        <button type="button" class="btn btn-default"
                ng-click="$ctrl.birdsNewSpeciesModeratorReview(birdsNewSpeciesModeratorReview.form, birdsNewSpeciesModeratorReview.id, birdsNewSpeciesModeratorReview.limit, birdsNewSpeciesModeratorReview.force)">
          Run
        </button>
      </form>
    </div>
    <div class="panel-footer">
      <div ng-if="$ctrl.birdsNewSpeciesModeratorReview.loading" class="alert alert-info" role="alert">
        <i class="fa fa-spinner fa-spin"></i>
        running...
      </div>
      <div ng-if="$ctrl.birdsNewSpeciesModeratorReview.response" class="alert alert-success" role="alert">
        {{$ctrl.birdsNewSpeciesModeratorReview.response ? 'success' : 'failure'}}
      </div>
      <div ng-if="$ctrl.birdsNewSpeciesModeratorReview.error" class="alert alert-danger" role="alert">
        {{$ctrl.birdsNewSpeciesModeratorReview.error}}
      </div>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">Auto translate nomenclatures</div>
    <div class="panel-body">
      <form name="autoTranslateNomenclatures" class="form-inline">
        <div class="form-group">
          <label for="autoTranslateNomenclatures-form">Form</label>
          <select class="form-control" id="autoTranslateNomenclatures-form"
                  ng-model="autoTranslateNomenclatures.form"
                  ng-options="::v.serverModel as ::v.label|translate for v in ::$ctrl.forms">
            <option value="">all forms</option>
          </select>
        </div>
        <div class="form-group">
          <label for="autoTranslateNomenclatures-id">Record ID</label>
          <input type="number" class="form-control" id="autoTranslateNomenclatures-id"
                 placeholder="all with missing local values"
                 ng-model="autoTranslateNomenclatures.id">
        </div>
        <div class="form-group">
          <label for="autoTranslateNomenclatures-limit">Records</label>
          <input type="number" class="form-control" id="autoTranslateNomenclatures-limit"
                 placeholder="newest records"
                 ng-model="autoTranslateNomenclatures.limit">
        </div>
        <div class="checkbox">
          <label>
            <input type="checkbox" ng-model="autoTranslateNomenclatures.force">
            Force
          </label>
        </div>
        <button type="button" class="btn btn-default"
                ng-click="$ctrl.autoTranslateNomenclatures(autoTranslateNomenclatures.form, autoTranslateNomenclatures.id, autoTranslateNomenclatures.limit, autoTranslateNomenclatures.force)">
          Run
        </button>
      </form>
    </div>
    <div class="panel-footer">
      <div ng-if="$ctrl.autoTranslateNomenclatures.loading" class="alert alert-info" role="alert">
        <i class="fa fa-spinner fa-spin"></i>
        running...
      </div>
      <div ng-if="$ctrl.autoTranslateNomenclatures.response" class="alert alert-success" role="alert">
        {{$ctrl.autoTranslateNomenclatures.response ? 'success' : 'failure'}}
      </div>
      <div ng-if="$ctrl.autoTranslateNomenclatures.error" class="alert alert-danger" role="alert">
        {{$ctrl.autoTranslateNomenclatures.error}}
      </div>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">ETRS89 Grid</div>
    <div class="panel-body">
      <form name="etrs89" class="form-inline">
        <div class="form-group">
          <label for="etrs89-form">Form</label>
          <select class="form-control" id="etrs89-form"
                  ng-model="etrs89.form"
                  ng-options="::v.serverModel as ::v.label|translate for v in ::$ctrl.forms">
            <option value="">all forms</option>
          </select>
        </div>
        <div class="form-group">
          <label for="etrs89-id">Record ID</label>
          <input type="number" class="form-control" id="etrs89-id"
                 placeholder="all with missing etrs89 grid code"
                 ng-model="etrs89.id">
        </div>
        <div class="form-group">
          <label for="etrs89-limit">Records</label>
          <input type="number" class="form-control" id="etrs89-limit"
                 placeholder="newest records"
                 ng-model="etrs89.limit">
        </div>
        <div class="checkbox">
          <label>
            <input type="checkbox" ng-model="etrs89.force">
            Force
          </label>
        </div>
        <button type="button" class="btn btn-default"
                ng-click="$ctrl.etrs89(etrs89.form, etrs89.id, etrs89.limit, etrs89.force)">
          Run
        </button>
      </form>
    </div>
    <div class="panel-footer">
      <div ng-if="$ctrl.etrs89.loading" class="alert alert-info" role="alert">
        <i class="fa fa-spinner fa-spin"></i>
        running...
      </div>
      <div ng-if="$ctrl.etrs89.response" class="alert alert-success" role="alert">
        {{$ctrl.etrs89.response ? 'success' : 'failure'}}
      </div>
      <div ng-if="$ctrl.etrs89.error" class="alert alert-danger" role="alert">
        {{$ctrl.etrs89.error}}
      </div>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">Upload to EBP</div>
    <div class="panel-body">
      <form name="ebpUpload" class="form-inline">
        <field name="ebpUpload-startDate" type="date"
               label="Start date"
               model="ebpUpload.start_date"></field>
        <field name="ebpUpload-endDate" type="date"
               label="End date"
               model="ebpUpload.end_date"></field>
        <div class="form-group">
            <p class="input-group">
                <label class="control-label" for="ebpUpload-mode">Mode</label>
                <select class="form-control" id="ebpUpload-mode" ng-disabled="ebpUpload.bulk"
                        ng-model="ebpUpload.mode" ng-init="ebpUpload.mode = 'insert'">
                    <option value="insert">Inseret/Update</option>
                    <option value="replace">Replace</option>
                    <option value="delete">Delete</option>
                </select>
            </p>
        </div>
        <div class="checkbox">
          <label>
            <input type="checkbox" ng-model="ebpUpload.bulk">
            Bulk
          </label>
        </div>
        <button type="button" class="btn btn-default"
                ng-click="$ctrl.ebpUpload(ebpUpload.start_date, ebpUpload.end_date, ebpUpload.mode, ebpUpload.bulk)">
            Run
        </button>
      </form>
    </div>
    <div class="panel-footer">
      <div ng-if="$ctrl.ebpUpload.loading" class="alert alert-info" role="alert">
        <i class="fa fa-spinner fa-spin"></i>
        running...
      </div>
      <div ng-if="$ctrl.ebpUpload.response" class="alert alert-success" role="alert">
        {{$ctrl.ebpUpload.response ? 'success' : 'failure'}}
      </div>
      <div ng-if="$ctrl.ebpUpload.error" class="alert alert-danger" role="alert">
        {{$ctrl.ebpUpload.error}}
      </div>
      <div ng-if="ebpUpload.bulk" class="alert alert-danger" role="alert" translate>
        EBP_UPLOAD_BULK_WARNING
      </div>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading" translate>SUSPICIOUS_ACTIVITY_TASK_TITLE</div>
    <div class="panel-body">
      <p translate>SUSPICIOUS_ACTIVITY_TASK_DESCRIPTION</p>
      <button type="button" class="btn btn-default"
              ng-click="$ctrl.detectSuspiciousActivity()">
        <span translate>SUSPICIOUS_ACTIVITY_TASK_RUN</span>
      </button>
    </div>
    <div class="panel-footer">
      <div ng-if="$ctrl.detectSuspiciousActivity.loading" class="alert alert-info" role="alert">
        <i class="fa fa-spinner fa-spin"></i>
        <span translate>SUSPICIOUS_ACTIVITY_TASK_RUNNING</span>
      </div>
      <div ng-if="$ctrl.detectSuspiciousActivity.response" class="alert alert-success" role="alert">
        <span translate>SUSPICIOUS_ACTIVITY_TASK_SUCCESS</span>
        <div ng-if="$ctrl.detectSuspiciousActivity.response.alertsCreated">
          <strong>{{$ctrl.detectSuspiciousActivity.response.alertsCreated}}</strong> <span translate>SUSPICIOUS_ACTIVITY_TASK_ALERTS_CREATED</span>
        </div>
        <div ng-if="$ctrl.detectSuspiciousActivity.response.message">
          {{$ctrl.detectSuspiciousActivity.response.message}}
        </div>
        <a ui-sref="auth.suspiciousActivityAlerts" class="btn btn-sm btn-default" style="margin-top: 10px;">
          <span translate>SUSPICIOUS_ACTIVITY_TASK_VIEW_ALERTS</span>
        </a>
      </div>
      <div ng-if="$ctrl.detectSuspiciousActivity.error" class="alert alert-danger" role="alert">
        {{$ctrl.detectSuspiciousActivity.error}}
      </div>
    </div>
  </div>
</div>
