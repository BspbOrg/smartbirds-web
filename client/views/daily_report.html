<div class="row">
  <div class="col-lg-12">
    <h1 class="page-header">
      {{::'DAILY_REPORT_TITLE_MAIN' | translate}}
      <small>{{::'DAILY_REPORT_TITLE_SECONDARY'|translate}}</small>
    </h1>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading clearfix">
        <div class="pull-right text-right">
          <div class="btn-group">
            <button type="button" class="btn btn-default" disabled
                    title="{{::'FORM_LIST_FOUND_RECORDS_COUNT_TOOLTIP' | translate}}">
              {{$ctrl.data == null ? '-' : $ctrl.data.length}}
            </button>
            <a role="button" class="btn btn-default" ng-click="$ctrl.export('csv')"
               ng-class="{disabled: !$ctrl.data || !$ctrl.data.length}"
               title="{{'FORM_LIST_BUTTON_CSV_EXPORT_TOOLTIP' | translate}}">
              <i class="fa fa-download fa-fw"></i> csv
            </a>
          </div>
        </div>
      </div>
      <div class="panel-body">
        <form role="form" class="form form-filter" ng-submit="$ctrl.update()">
          <div class="row">
            <div class="col-sm-4 col-lg-3">
              <field name="date" type="date"
                     label="{{'DAILY_REPORT_FILTER_DATE' | translate}}"
                     on-select="$ctrl.update()"
                     model="$ctrl.filter.date"></field>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-4 col-lg-3">
              <button class="btn btn-primary" type="submit">
                {{::'DAILY_REPORT_SUBMIT'|translate}}
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-12 table-responsive">
    <table class="table table-striped table-hover">
      <thead>
      <tr>
        <th>{{::'DAILY_REPORT_LIST_TABLE_FORM'|translate}}</th>
        <th>{{::'DAILY_REPORT_LIST_TABLE_LOCATION'|translate}}</th>
        <th>{{::'DAILY_REPORT_LIST_TABLE_SPECIES'|translate}}</th>
        <th>{{::'DAILY_REPORT_LIST_TABLE_COUNT'|translate}}</th>
      </tr>
      </thead>
      <tbody>
      <tr ng-repeat="row in $ctrl.data">
        <td>{{::$ctrl.formName(row.form)|translate}}</td>
        <td>{{::row.location|localLabel}}</td>
        <td>
          {{::row.species|localLabel}}<br/>
          <strong>{{::row.species.la}}</strong>
        </td>
        <td>{{::row.count}}</td>
      </tr>
      </tbody>
    </table>
  </div>
  <div class="col-lg-12">
    <div class="text-center" ng-if="$ctrl.loading">
      <i class="fa fa-spinner fa-2x fa-spin"></i>
    </div>
  </div>
</div>
